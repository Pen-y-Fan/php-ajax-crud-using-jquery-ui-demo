<?php

declare(strict_types=1);

//fetch.php

include_once(__DIR__ . '/../database_connection.php');

$query = 'SELECT * FROM tbl_sample';
$statement = $connect->prepare($query);
$statement->execute();
$result = $statement->fetchAll();
$total_row = count($result);
$output = '
<table class="table table-striped table-bordered">
	<tr>
		<th>First Name</th>
		<th>Last Name</th>
		<th>Edit</th>
		<th>Delete</th>
	</tr>
';
if ($total_row > 0) {
    foreach ($result as $row) {
        $output .= '
		<tr>
			<td width="40%">' . $row['first_name'] . '</td>
			<td width="40%">' . $row['last_name'] . '</td>
			<td width="10%">
				<button
				type="button"
				name="edit"
				class="btn btn-primary btn-xs edit"
				id="' . $row['id'] . '">Edit</button>
			</td>
			<td width="10%">
				<button
				type="button"
				name="delete"
				class="btn btn-danger btn-xs delete"
				id="' . $row['id'] . '">Delete</button>
			</td>
		</tr>
		';
    }
} else {
    $output .= '
	<tr>
		<td colspan="4" align="center">Data not found</td>
	</tr>
	';
}
$output .= '</table>';
echo $output;
